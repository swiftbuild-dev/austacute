# Contentful CMS Configuration

This file contains all environment variables needed for Contentful integration.

## Setup Instructions

1. **Get your Contentful credentials:**
   - Log in to your Contentful space at https://app.contentful.com
   - Go to Settings → API Keys
   - Select or create an API Key with access to the Product, Category, and Product Variant content types
   - Copy the following values:
     - **Space ID**: The ID of your content space
     - **Content Delivery API Access Token**: For published content (production)
     - **Content Preview API Access Token** (optional): For draft/unpublished content (preview mode)

2. **Add the variables below to your `.env.local` file** (create it if it doesn't exist)

## Required Environment Variables

```env
# Contentful Space ID
# Found in: Settings → General → Space ID
VITE_CONTENTFUL_SPACE_ID=z9ei2s7jmq34

# Contentful Content Delivery API Access Token
# Found in: Settings → API Keys → Content Delivery API Access Tokens
# This token provides access to published content (recommended for production)
VITE_CONTENTFUL_ACCESS_TOKEN=1D1JdXttqP3jIt6Xasfcs_IIFyHBOtpvfmuUliWmkgc

# (OPTIONAL) Contentful Content Preview API Access Token
# Found in: Settings → API Keys → Preview Token
# Use this to preview unpublished/draft content
# If not set, the app will use the regular access token
VITE_CONTENTFUL_PREVIEW_TOKEN=
```

## Important Security Notes

⚠️ **NEVER commit `.env.local` to version control!**

1. Add `.env.local` to your `.gitignore` file:
   ```
   .env.local
   .env.*.local
   ```

2. Keep your access tokens secret:
   - Don't share your `.env.local` file
   - Don't commit credentials to git
   - Use different tokens for different environments if possible
   - Regularly rotate tokens in Settings → API Keys

3. In production:
   - Use environment variables provided by your hosting platform
   - Never hardcode credentials in source code
   - Consider restricting API key access by environment

## Verifying Your Configuration

To verify that your Contentful integration is working:

1. Start your development server:
   ```bash
   bun dev
   ```

2. Check the browser console for connection verification messages

3. You should see: "✓ Connected to Contentful space: [Your Space Name]"

## Troubleshooting

### "Missing Contentful configuration" error
- Check that `.env.local` exists in the project root
- Verify that `VITE_CONTENTFUL_SPACE_ID` and `VITE_CONTENTFUL_ACCESS_TOKEN` are set
- Restart the dev server after adding environment variables
- Note: Environment variables must start with `VITE_` to be exposed to the client

### "Unauthorized" or "Access Denied" errors
- Verify your Space ID is correct
- Check that your API key has access to Product, Category, and Product Variant content types
- Ensure you're using the Content Delivery API token (not Content Management API)

### "Not found" errors
- Ensure your content model matches the expected structure
- Verify that you have published your content entries
- Check that you're using the correct content type names: "product", "category", "productVariant"

### Products not showing
- Check that products are published in Contentful (not just in draft)
- Verify that product entries have all required fields filled
- Check browser console for any error messages

## Content Model Reference

Your Contentful content model should have these content types:

### Category
- `name` (Text, Short) - Required, Title field
- `slug` (Text, Short) - Required, Unique
- `description` (Text, Long) - Optional

### ProductVariant
- `name` (Text, Short) - Required, Title field
- `priceModifier` (Number, Integer) - Required

### Product
- `internalName` (Text, Short) - Required, Title field (admin only)
- `name` (Text, Short) - Required
- `slug` (Text, Short) - Required, Unique
- `sku` (Text, Short) - Required, Unique
- `category` (Reference, One) - Required, accepts Category
- `images` (Media, Many) - Required, Min: 1
- `shortDescription` (Text, Long) - Required
- `description` (Text, Long) - Required
- `price` (Number, Integer) - Required
- `compareAtPrice` (Number, Integer) - Optional
- `inStock` (Boolean) - Required, Default: true
- `stockQuantity` (Number, Integer) - Optional
- `variants` (Reference, Many) - Optional, accepts ProductVariant
- `trustBadges` (Text, List) - Optional
- `featured` (Boolean) - Optional, Default: false

For more details, see: `INTEGRATION_GUIDE.md`
